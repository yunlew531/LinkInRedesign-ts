import{_ as J,s as N,d as A,e as $,o as G,g as q,p as R,q as X,r as Z,t as K,v as ee,w as te,x as se,y as oe,z as ne}from"./index.9713314d.js";import{d as ie,C as T,i as ae,f as j,r as k,c as ce,g as c,h as e,j as h,w as v,u as m,F as x,k as S,m as le,n as de,q as d,o as l,t as r,l as re,x as ue,D as E,E as D}from"./vendor.7cc4f9d7.js";import{d as _e}from"./dayjs.5b459ab9.js";import{Q as he}from"./main.8fb6bbb1.js";const a=p=>(le("data-v-68775f2a"),p=p(),de(),p),me={class:"feed-container"},pe={class:"feed-main"},be={class:"new-post"},fe=a(()=>e("h3",null,"new post",-1)),ve=a(()=>e("img",{src:R,alt:"submit button"},null,-1)),ge=[ve],ke=a(()=>e("div",null,null,-1)),ye=a(()=>e("div",{class:"divide"},[e("span",{class:"divide-text"},[d(" Sort by: "),e("span",{class:"emphasize"},"trending")])],-1)),we={class:"feeds-list"},Ce={class:"feed-card"},Ae={class:"feed-card-header"},Te={class:"liked-list"},je={key:0,class:"like-this-text"},xe=d(" ... "),Se={class:"people-like-btn"},Ee=d(" people liked this"),De=["onMouseleave","onMouseenter"],Ue={type:"button",class:"feed-card-more-btn"},Me={src:X,alt:"more button"},Fe={src:Z,alt:"more button"},He=a(()=>e("ul",null,[e("li",null,[e("button",{type:"button"},"delete")]),e("li",null,[e("button",{type:"button"},"\u6536\u85CF")])],-1)),Le={class:"feed-card-body"},Pe={class:"feed-card-user"},Be=["src","alt"],Ie={class:"article-time"},Oe={class:"article-create-time"},Qe=["innerHTML"],Ve={class:"feed-card-footer"},We=["onClick"],Ye=a(()=>e("img",{src:oe,alt:"thumbs-up button"},null,-1)),ze=[Ye],Je=["onClick"],Ne=a(()=>e("img",{src:ne,alt:"thumbs-up button"},null,-1)),$e=[Ne],Ge=a(()=>e("button",{type:"button",class:"feed-card-footer-btn"},[e("img",{src:K,alt:"comments button"})],-1)),qe=a(()=>e("button",{type:"button",class:"feed-card-footer-btn"},[e("img",{src:ee,alt:"share button",class:"share-img"}),e("span",null,"share")],-1)),Re=ie({setup(p){const{getProfile:U,getArticles:M,setArticles:F,setArticle:y}=N;U(),M(1);const H=T(()=>A(()=>import("./FeedAside.79901d6f.js"),["assets/FeedAside.79901d6f.js","assets/FeedAside.8a850ff1.css","assets/index.9713314d.js","assets/index.44ae45ab.css","assets/vendor.7cc4f9d7.js"])),L=T(()=>A(()=>import("./Editor.f332355e.js"),["assets/Editor.f332355e.js","assets/Editor.62b0f2d3.css","assets/vendor.7cc4f9d7.js","assets/index.9713314d.js","assets/index.44ae45ab.css"])),w=ae($),P=j(()=>w.value.articles),b=j(()=>w.value.user),B={placeholder:"input content",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]}},f=k(null);k([{id:"b61owa2CGXa70CPs",uid:"QbW2SLcSr90oL9ly05U0",name:"Theresa Steward",user_photo:"feed-user-1",profession:"iOS developer",content:"What did the Dursleys care if Harry lost his place on the House Quidditch team because he hadn\u2019t practiced all summer? What was it to the Dursleys if Harry went back to school without any of his homework done? The Dursleys were what wizards called Muggles (not a drop of magical blood in their veins).",likes:[{name:"Alina",uid:"5hiP6EBTn5m7bI7Qc68t"},{name:"Mike",uid:"8TmjUC59g7fn6NUJ3p5x"},{name:"Jason",uid:"wEUnj3c3FJ6kEC5W6z82"},{name:"Tom",uid:"W0dX676k7n6SDsr1QYma"}],comments:[],imgs:[]},{id:"UO1w88P1nG2dS2pu",uid:"abB3kTo3WDS319sOC5td",name:"Kyle Fisher",user_photo:"feed-user-2",profession:"Product designer at Commandor Corp.",content:"How\u2019s your day going, guys?",likes:[{name:"Jack",uid:"3G1Lhjnj46MlmEY5JUg4"}],comments:[],imgs:[]}]);const u=k([]),C=(s,n)=>{if(n.type==="mouseenter")u.value.push(s);else if(n.type==="mouseleave"){const o=u.value.indexOf(s);if(o===-1)return;u.value.splice(o,1)}},I=async()=>{const s={content:f.value.getContents()};try{const{data:n}=await G(s),{articles:o}=n;F(o),f.value.setText()}catch(n){console.dir(n)}},O=s=>new he(s.ops).convert(),Q=()=>f.value.focus(),V=async(s,n)=>{const o={name:b.value.name,photo:b.value.photo,jobs:b.value.jobs};try{const{data:t}=await te(o,s),{article:_}=t;y(n,_)}catch(t){console.dir(t)}},W=async(s,n)=>{try{const{data:o}=await se(s),{article:t}=o;y(n,t)}catch(o){console.dir(o)}},Y=s=>{var o;return((o=s.likes)==null?void 0:o.length)?s.likes.some(t=>t.uid===b.value.uid):!1},z=s=>{if(!(!s||s&&!s.length))return s.filter((n,o)=>o<5)};return(s,n)=>{const o=ce("router-link");return l(),c("div",me,[e("main",pe,[e("section",be,[e("div",{class:"new-post-header"},[fe,e("button",{type:"button",class:"new-post-submit-btn",onClick:I},ge)]),h(m(L),{ref:(t,_)=>{_.editorEl=t,f.value=t},options:B,toolbar:!0},{buttons:v(()=>[ke]),_:1},512)]),ye,e("ul",we,[(l(!0),c(x,null,S(m(P),(t,_)=>(l(),c("li",Ce,[e("div",Ae,[e("ul",Te,[(l(!0),c(x,null,S(z(t.likes),(i,g)=>(l(),c("li",{key:i.uid},[d(r(t.likes&&g===t.likes.length-1&&g!==0?"\xA0and":"")+" ",1),h(o,{to:`@${i.uid}`},{default:v(()=>[d(r(i.name),1)]),_:2},1032,["to"]),d(" "+r(t.likes&&g<t.likes.length-2?",\xA0":""),1)]))),128)),t.likes&&t.likes.length?(l(),c("li",je,[xe,e("button",Se,r(t.likes.length),1),Ee])):re("",!0)]),e("div",{class:ue(["card-btns-group",{show:u.value.includes(t.id)}]),onMouseleave:i=>C(t.id,i),onMouseenter:i=>C(t.id,i)},[e("button",Ue,[E(e("img",Me,null,512),[[D,!u.value.includes(t.id)]]),E(e("img",Fe,null,512),[[D,u.value.includes(t.id)]])]),He],42,De)]),e("div",Le,[e("div",Pe,[h(o,{to:`/@${t.uid}`,class:"user-link"},{default:v(()=>[e("img",{src:t.photo||m(q)("user"),alt:t.name},null,8,Be)]),_:2},1032,["to"]),e("div",null,[h(o,{to:`/@${t.uid}`,class:"user-link"},{default:v(()=>[d(r(t.name),1)]),_:2},1032,["to"]),e("h4",null,r(t.job),1)]),e("div",Ie,[e("span",Oe," create time: "+r(m(_e)(t.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)])]),e("div",{innerHTML:O(t.content)},null,8,Qe)]),e("div",Ve,[Y(t)?(l(),c("button",{key:0,type:"button",onClick:i=>W(t.id,_),class:"feed-card-footer-btn active"},ze,8,We)):(l(),c("button",{key:1,type:"button",class:"feed-card-footer-btn",onClick:i=>V(t.id,_)},$e,8,Je)),Ge,qe])]))),256))])]),h(m(H),{onFocus:Q})])}}});var tt=J(Re,[["__scopeId","data-v-68775f2a"]]);export{tt as default};
