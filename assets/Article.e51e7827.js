import{d as J,s as W,i as X,f as Z,r as K,c as tt,o as n,g as l,h as t,F as H,k as I,t as c,l as h,j as f,w as p,q as k,u as v,D as et,H as st,I as ot,m as it,n as nt}from"./vendor.a132856b.js";import{_ as lt,e as at,g as ct,u as rt,v as dt,w as ut,x as mt,y as ht}from"./index.89e2cf0c.js";import{Q as vt}from"./main.21dd7f43.js";import{d as L}from"./dayjs.9461779c.js";const r=s=>(it("data-v-0c19e38f"),s=s(),nt(),s),bt={class:"article-card"},kt={class:"article-card-header"},gt={class:"liked-list"},yt={class:"liked-item-modal-container"},_t=r(()=>t("div",{class:"liked-item-triangle-dicoration"},null,-1)),ft={class:"liked-item-modal"},pt=["src","alt"],Ct={class:"liked-item-modal-content"},At={class:"liked-modal-btns"},xt=["onClick"],$t=r(()=>t("button",{type:"button"},"chat",-1)),wt={key:0},Mt={key:1},jt={key:0,class:"like-this-text"},Tt=k(" and"),Dt=r(()=>t("button",{class:"people-like-btn"},"more",-1)),Ft=k("people "),Yt=[Tt,Dt,Ft],Ht={key:1},It=r(()=>t("button",{type:"button",class:"article-card-more-btn"},[t("img",{src:rt,alt:"more button"})],-1)),Lt={key:0},qt={key:1},St={key:2},Ut={class:"article-card-body"},Nt={class:"article-card-user"},Vt=["src","alt"],Bt={key:0,class:"user-link-notice"},Qt={class:"article-time"},Pt={class:"article-create-time"},Et=["innerHTML"],Ot={class:"article-card-footer"},Rt=r(()=>t("img",{src:dt,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),zt={class:"article-card-likes-qty"},Gt=r(()=>t("img",{src:ut,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),Jt={class:"article-card-likes-qty"},Wt=r(()=>t("img",{src:mt,alt:"comments",class:"comments-img"},null,-1)),Xt={class:"article-card-comments-qty"},Zt=r(()=>t("button",{type:"button",class:"article-card-footer-btn"},[t("img",{src:ht,alt:"share button",class:"share-img"}),t("span",null,"share")],-1)),Kt={class:"article-messages-list"},te=["src","onClick"],ee={class:"comment-body"},se={class:"comment-header"},oe=["onClick"],ie=r(()=>t("span",{class:"material-icons"},"delete_outline",-1)),ne=[ie],le={class:"comment-input-group"},ae=["src"],ce=r(()=>t("span",{class:"material-icons"},"send",-1)),re=[ce],de=J({props:{article:{type:Object,default:()=>({}),required:!0},index:{type:Number,default:0,required:!0}},emits:["thumbsUp","removeThumbsUp","deleteArticle","addArticleFavorite","removeAriticleFavorite","deleteComment","submitComment"],setup(s,{expose:q,emit:d}){const S=()=>d("thumbsUp"),U=()=>d("removeThumbsUp"),N=()=>d("deleteArticle"),V=()=>d("addArticleFavorite"),B=()=>d("removeAriticleFavorite"),C=(i,e)=>{const a={articleId:i,articleIdx:e,comment:y.value[e]};d("submitComment",a)},Q=(i,e,a)=>{d("deleteComment",{article:i,articleIdx:e,commentId:a})},P=W(),E=X(at),u=Z(()=>E.value.user),O=i=>{var a;return((a=i.likes)==null?void 0:a.length)?i.likes.some(b=>b.uid===u.value.uid):!1},g=i=>{if(!(!i||i&&!i.length))return i.filter((e,a)=>a<5)},A=i=>{const e=i.target;i.type==="mouseenter"?e.classList.add("show"):e.classList.remove("show")},x=i=>P.push(`/@${i}/profile`),R=i=>{i.target.closest(".article-card").classList.toggle("show")},$=i=>{const e=i.target;i.type==="mouseenter"?e.classList.add("show"):i.type==="mouseleave"&&e.classList.remove("show")},z=i=>{if(!(!(i==null?void 0:i.length)||!u.value.uid))return i.includes(u.value.uid)},G=i=>new vt(i.ops).convert(),y=K([]);return q({resetCommentInput:i=>y.value[i]=""}),(i,e)=>{var b,w,M,j;const a=tt("router-link");return n(),l("div",bt,[t("div",kt,[t("ul",gt,[(n(!0),l(H,null,I(g(s.article.likes),(o,m)=>{var T,D,F,Y;return n(),l("li",{key:o.uid,onMouseenter:e[0]||(e[0]=_=>A(_)),onMouseleave:e[1]||(e[1]=_=>A(_)),class:"liked-item"},[t("div",yt,[_t,t("div",ft,[t("img",{src:o.photo,alt:o.name},null,8,pt),t("div",Ct,[t("h3",null,c(o.name),1),t("h4",null,c(o.job),1),t("div",At,[t("button",{type:"button",onClick:_=>x(o.uid)},"profile",8,xt),$t])])])]),m!==0&&((T=g(s.article.likes))==null?void 0:T.length)-1===m&&s.article.likes&&((D=s.article.likes)==null?void 0:D.length)<=5?(n(),l("span",wt,"\xA0and\xA0")):h("",!0),f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),m<4&&s.article.likes&&(((F=g(s.article.likes))==null?void 0:F.length)-2!==m||s.article.likes.length>5)&&((Y=g(s.article.likes))==null?void 0:Y.length)-1!==m?(n(),l("span",Mt,",\xA0")):h("",!0)],32)}),128)),s.article.likes&&s.article.likes.length>5?(n(),l("li",jt,Yt)):h("",!0),((b=s.article.likes)==null?void 0:b.length)?(n(),l("li",Ht,"\xA0liked this")):h("",!0)]),t("div",{class:"card-btns-group",onMouseleave:e[5]||(e[5]=o=>$(o)),onMouseenter:e[6]||(e[6]=o=>$(o))},[It,t("ul",null,[v(u).uid===s.article.uid?(n(),l("li",Lt,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>N())},"delete")])):h("",!0),z(s.article.favorites)?(n(),l("li",St,[t("button",{type:"button",class:"un-favorite-btn",onClick:e[4]||(e[4]=o=>B())},"UnFavorite")])):(n(),l("li",qt,[t("button",{type:"button",onClick:e[3]||(e[3]=o=>V())},"favorite")]))])],32)]),t("div",Ut,[t("div",Nt,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[t("img",{src:s.article.photo||v(ct)("user"),alt:s.article.name},null,8,Vt)]),_:1},8,["to"]),t("div",null,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[k(c(s.article.name),1)]),_:1},8,["to"]),v(u).uid===s.article.uid?(n(),l("span",Bt,"You")):h("",!0),t("h4",null,c(s.article.job),1)]),t("div",Qt,[t("span",Pt,c(v(L)(s.article.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)])]),t("div",{innerHTML:G(s.article.content)},null,8,Et)]),t("div",Ot,[O(s.article)?(n(),l("button",{key:0,type:"button",onClick:e[7]||(e[7]=o=>U()),class:"article-card-footer-btn active"},[Rt,t("span",zt,c((w=s.article.likes)==null?void 0:w.length),1)])):(n(),l("button",{key:1,type:"button",class:"article-card-footer-btn",onClick:e[8]||(e[8]=o=>S())},[Gt,t("span",Jt,c((M=s.article.likes)==null?void 0:M.length),1)])),t("button",{type:"button",class:"article-card-footer-btn",onClick:e[9]||(e[9]=o=>R(o))},[Wt,t("span",Xt,c((j=s.article.comments)==null?void 0:j.length),1)]),Zt]),t("ul",Kt,[(n(!0),l(H,null,I(s.article.comments,o=>(n(),l("li",{key:o.id},[t("img",{src:o.photo,alt:"comment.name",onClick:m=>x(o.uid)},null,8,te),t("div",ee,[t("div",se,[f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),t("span",null,c(v(L)(o.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)]),t("p",null,c(o.comment),1)]),o.uid===v(u).uid?(n(),l("button",{key:0,type:"button",class:"comment-delete-btn",onClick:m=>Q(s.article,s.index,o.id)},ne,8,oe)):h("",!0)]))),128)),t("li",le,[t("img",{src:v(u).photo,alt:"comment.name"},null,8,ae),et(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>y.value[s.index]=o),onKeyup:e[11]||(e[11]=ot(o=>C(s.article.id,s.index),["enter"]))},null,544),[[st,y.value[s.index]]]),t("button",{type:"button",onClick:e[12]||(e[12]=o=>C(s.article.id,s.index))},re)])])])}}});var ke=lt(de,[["__scopeId","data-v-0c19e38f"]]);export{ke as default};
