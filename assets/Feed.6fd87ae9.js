import{_ as B,s as H,d as _,e as $,F as G,G as Q,p as q,q as z,o as M,H as X,I as Y,r as K,t as Z}from"./index.fe1cc65e.js";import{d as ee,D as f,j as te,k as S,r as m,c as y,e as n,i as A,l as se,u,F as oe,m as ae,p as ne,f as ce,v as ie,o as b}from"./vendor.4dab4da4.js";const p=d=>(ne("data-v-ae376434"),d=d(),ce(),d),re={class:"feed-container"},le={class:"feed-main"},de={class:"new-post"},me=p(()=>n("h3",null,"new post",-1)),ue=p(()=>n("img",{src:Q,alt:"submit button"},null,-1)),pe=[ue],he=p(()=>n("div",null,null,-1)),ve=p(()=>n("div",{class:"divide"},[n("span",{class:"divide-text"},[ie(" Sort by: "),n("span",{class:"emphasize"},"trending")])],-1)),_e={class:"feeds-list"},fe=ee({setup(d){const{getProfile:k,getArticles:w,setArticles:T,setArticle:i,setArticleComments:F}=H;k(),w(1);const E=f(()=>_(()=>import("./FeedAside.c05af5c3.js"),["assets/FeedAside.c05af5c3.js","assets/FeedAside.e7751684.css","assets/index.fe1cc65e.js","assets/index.754faa28.css","assets/vendor.4dab4da4.js"])),O=f(()=>_(()=>import("./Editor.5a12f68a.js"),["assets/Editor.5a12f68a.js","assets/Editor.1cebcf8b.css","assets/vendor.4dab4da4.js","assets/index.fe1cc65e.js","assets/index.754faa28.css"])),D=f(()=>_(()=>import("./Article.7bbbbcfc.js"),["assets/Article.7bbbbcfc.js","assets/Article.16e33b69.css","assets/vendor.4dab4da4.js","assets/index.fe1cc65e.js","assets/index.754faa28.css","assets/main.6def93c2.js","assets/dayjs.bfbae3ba.js"])),g=te($),r=S(()=>g.value.user),J=S(()=>g.value.articles),I={placeholder:"input content",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]}},l=m();m([{id:"b61owa2CGXa70CPs",uid:"QbW2SLcSr90oL9ly05U0",name:"Theresa Steward",user_photo:"feed-user-1",profession:"iOS developer",content:"What did the Dursleys care if Harry lost his place on the House Quidditch team because he hadn\u2019t practiced all summer? What was it to the Dursleys if Harry went back to school without any of his homework done? The Dursleys were what wizards called Muggles (not a drop of magical blood in their veins).",likes:[{name:"Alina",uid:"5hiP6EBTn5m7bI7Qc68t"},{name:"Mike",uid:"8TmjUC59g7fn6NUJ3p5x"},{name:"Jason",uid:"wEUnj3c3FJ6kEC5W6z82"},{name:"Tom",uid:"W0dX676k7n6SDsr1QYma"}],comments:[],imgs:[]},{id:"UO1w88P1nG2dS2pu",uid:"abB3kTo3WDS319sOC5td",name:"Kyle Fisher",user_photo:"feed-user-2",profession:"Product designer at Commandor Corp.",content:"How\u2019s your day going, guys?",likes:[{name:"Jack",uid:"3G1Lhjnj46MlmEY5JUg4"}],comments:[],imgs:[]}]);const N=async()=>{if(l.value.checkEmpty()){alert("content required");return}const a={content:l.value.getContents()};try{const{data:e}=await G(a),{articles:t}=e;T(t),l.value.setText()}catch(e){console.dir(e)}},U=()=>l.value.focus(),j=async(o,a)=>{const e=JSON.parse(JSON.stringify(o)),t={name:r.value.name,photo:r.value.photo,job:r.value.job};try{const{data:s}=await q(t,o.id),{likes:c}=s.article;e.likes=c,i(a,e)}catch(s){console.dir(s)}},P=async(o,a)=>{const e=JSON.parse(JSON.stringify(o));try{const{data:t}=await z(o.id),{likes:s}=t.article;e.likes=s,i(a,e)}catch(t){console.dir(t)}},R=async o=>{try{await M(o),w(1)}catch(a){console.dir(a)}},x=async(o,a)=>{const e=JSON.parse(JSON.stringify(o));try{const{data:t}=await X(o.id),{favorites:s}=t;e.favorites=s,i(a,e),alert("add success")}catch(t){console.log(t)}},L=async(o,a)=>{const e=JSON.parse(JSON.stringify(o));try{const{data:t}=await Y(o.id),{favorites:s}=t;e.favorites=s,i(a,e),alert("remove success")}catch(t){console.dir(t)}},C=m([]),h=m(!1),V=async o=>{const{articleId:a,articleIdx:e,comment:t}=o;if(h.value){alert("Please wait 30 seconds for each message");return}if(h.value=!0,!t){alert("comment required");return}const s={name:r.value.name,photo:r.value.photo||"",comment:t};try{const{data:c}=await K(s,a),{comments:v}=c;F(v,e),C.value[e].resetCommentInput(e)}catch(c){console.dir(c)}setTimeout(()=>{h.value=!1},30*1e3)},W=async o=>{const{article:a,articleIdx:e,commentId:t}=o,s=JSON.parse(JSON.stringify(a));try{const{data:c}=await Z(a.id,t),{comments:v}=c;s.comments=v,i(e,s)}catch(c){console.dir(c)}};return(o,a)=>(b(),y("div",re,[n("main",le,[n("section",de,[n("div",{class:"new-post-header"},[me,n("button",{type:"button",class:"new-post-submit-btn",onClick:N},pe)]),A(u(O),{ref:(e,t)=>{t.editorEl=e,l.value=e},options:I,toolbar:!0},{buttons:se(()=>[he]),_:1},512)]),ve,n("ul",_e,[(b(!0),y(oe,null,ae(u(J),(e,t)=>(b(),y("li",{key:e.id},[A(u(D),{ref:s=>C.value[t]=s,article:e,index:t,onThumbsUp:s=>j(e,t),onRemoveThumbsUp:s=>P(e,t),onDeleteArticle:s=>R(e.id),onAddArticleFavorite:s=>x(e,t),onRemoveAriticleFavorite:s=>L(e,t),onSubmitComment:V,onDeleteComment:W},null,8,["article","index","onThumbsUp","onRemoveThumbsUp","onDeleteArticle","onAddArticleFavorite","onRemoveAriticleFavorite"])]))),128))])]),A(u(E),{onFocus:U})]))}});var be=B(fe,[["__scopeId","data-v-ae376434"]]);export{be as default};
