import{d as z,s as G,i as J,f as W,r as K,c as tt,o as i,g as l,h as t,F as L,k as H,t as c,l as h,j as f,w as p,q as k,u as v,D as et,M as st,N as ot,m as nt,n as it}from"./vendor.d65808b7.js";import{_ as lt,e as at,g as ct,X as rt,Y as dt,Z as ut,$ as mt,a0 as ht}from"./index.f9042d71.js";import{Q as vt}from"./main.5ebddbe0.js";import{d as I}from"./dayjs.19e4cc98.js";const r=s=>(nt("data-v-5fa2aecb"),s=s(),it(),s),bt={class:"article-card"},kt={class:"article-card-header"},gt={class:"liked-list"},yt={class:"liked-item-modal-container"},_t=r(()=>t("div",{class:"liked-item-triangle-dicoration"},null,-1)),ft={class:"liked-item-modal"},pt=["src","alt"],Ct={class:"liked-item-modal-content"},At={class:"liked-modal-btns"},xt=["onClick"],$t=r(()=>t("button",{type:"button"},"chat",-1)),wt={key:0},Mt={key:1},jt={key:0,class:"like-this-text"},Tt=k(" and"),Dt=r(()=>t("button",{class:"people-like-btn"},"more",-1)),Ft=k("people "),Yt=[Tt,Dt,Ft],Lt={key:1},Ht=r(()=>t("button",{type:"button",class:"article-card-more-btn"},[t("img",{src:rt,alt:"more button"})],-1)),It={key:0},qt={key:1},Nt={key:2},St={class:"article-card-body"},Ut={class:"article-card-user"},Vt=["src","alt"],Bt={key:0,class:"user-link-notice"},Qt={class:"article-time"},Pt={class:"article-create-time"},Et=["innerHTML"],Ot={class:"article-card-footer"},Rt=r(()=>t("img",{src:dt,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),Xt={class:"article-card-likes-qty"},Zt=r(()=>t("img",{src:ut,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),zt={class:"article-card-likes-qty"},Gt=r(()=>t("img",{src:mt,alt:"comments",class:"comments-img"},null,-1)),Jt={class:"article-card-comments-qty"},Wt=r(()=>t("button",{type:"button",class:"article-card-footer-btn"},[t("img",{src:ht,alt:"share button",class:"share-img"}),t("span",null,"share")],-1)),Kt={class:"article-messages-list"},te=["src","onClick"],ee={class:"comment-body"},se={class:"comment-header"},oe=["onClick"],ne=r(()=>t("span",{class:"material-icons"},"delete_outline",-1)),ie=[ne],le={class:"comment-input-group"},ae=["src"],ce=r(()=>t("span",{class:"material-icons"},"send",-1)),re=[ce],de=z({props:{article:{type:Object,default:()=>({}),required:!0},index:{type:Number,default:0,required:!0}},emits:["thumbsUp","removeThumbsUp","deleteArticle","addArticleFavorite","removeArticleFavorite","deleteComment","postComment"],setup(s,{expose:q,emit:d}){const N=()=>d("thumbsUp"),S=()=>d("removeThumbsUp"),U=()=>d("deleteArticle"),V=()=>d("addArticleFavorite"),B=()=>d("removeArticleFavorite"),C=(n,e)=>{const a={articleId:n,articleIdx:e,comment:y.value[e]};d("postComment",a)},Q=(n,e,a)=>{d("deleteComment",{article:n,articleIdx:e,commentId:a})},P=G(),E=J(at),u=W(()=>E.value.user),O=n=>{var a;return((a=n.likes)==null?void 0:a.length)?n.likes.some(b=>b.uid===u.value.uid):!1},g=n=>{if(!(!n||n&&!n.length))return n.filter((e,a)=>a<5)},A=n=>{const e=n.target;n.type==="mouseenter"?e.classList.add("show"):e.classList.remove("show")},x=n=>P.push(`/@${n}/profile`),R=n=>{n.target.closest(".article-card").classList.toggle("show")},$=n=>{const e=n.target;n.type==="mouseenter"?e.classList.add("show"):n.type==="mouseleave"&&e.classList.remove("show")},X=n=>{if(!(!(n==null?void 0:n.length)||!u.value.uid))return n.includes(u.value.uid)},Z=n=>new vt(n.ops).convert(),y=K([]);return q({resetCommentInput:n=>y.value[n]=""}),(n,e)=>{var b,w,M,j;const a=tt("router-link");return i(),l("div",bt,[t("div",kt,[t("ul",gt,[(i(!0),l(L,null,H(g(s.article.likes),(o,m)=>{var T,D,F,Y;return i(),l("li",{key:o.uid,onMouseenter:e[0]||(e[0]=_=>A(_)),onMouseleave:e[1]||(e[1]=_=>A(_)),class:"liked-item"},[t("div",yt,[_t,t("div",ft,[t("img",{src:o.photo,alt:o.name},null,8,pt),t("div",Ct,[t("h3",null,c(o.name),1),t("h4",null,c(o.job),1),t("div",At,[t("button",{type:"button",onClick:_=>x(o.uid)},"profile",8,xt),$t])])])]),m!==0&&((T=g(s.article.likes))==null?void 0:T.length)-1===m&&s.article.likes&&((D=s.article.likes)==null?void 0:D.length)<=5?(i(),l("span",wt,"\xA0and\xA0")):h("",!0),f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),m<4&&s.article.likes&&(((F=g(s.article.likes))==null?void 0:F.length)-2!==m||s.article.likes.length>5)&&((Y=g(s.article.likes))==null?void 0:Y.length)-1!==m?(i(),l("span",Mt,",\xA0")):h("",!0)],32)}),128)),s.article.likes&&s.article.likes.length>5?(i(),l("li",jt,Yt)):h("",!0),((b=s.article.likes)==null?void 0:b.length)?(i(),l("li",Lt,"\xA0liked this")):h("",!0)]),t("div",{class:"card-btns-group",onMouseleave:e[5]||(e[5]=o=>$(o)),onMouseenter:e[6]||(e[6]=o=>$(o))},[Ht,t("ul",null,[v(u).uid===s.article.uid?(i(),l("li",It,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>U())},"delete")])):h("",!0),X(s.article.favorites)?(i(),l("li",Nt,[t("button",{type:"button",class:"un-favorite-btn",onClick:e[4]||(e[4]=o=>B())},"UnFavorite")])):(i(),l("li",qt,[t("button",{type:"button",onClick:e[3]||(e[3]=o=>V())},"favorite")]))])],32)]),t("div",St,[t("div",Ut,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[t("img",{src:s.article.photo||v(ct)("user"),alt:s.article.name},null,8,Vt)]),_:1},8,["to"]),t("div",null,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[k(c(s.article.name),1)]),_:1},8,["to"]),v(u).uid===s.article.uid?(i(),l("span",Bt,"You")):h("",!0),t("h4",null,c(s.article.job),1)]),t("div",Qt,[t("span",Pt,c(v(I)(s.article.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)])]),t("div",{innerHTML:Z(s.article.content)},null,8,Et)]),t("div",Ot,[O(s.article)?(i(),l("button",{key:0,type:"button",onClick:e[7]||(e[7]=o=>S()),class:"article-card-footer-btn active"},[Rt,t("span",Xt,c((w=s.article.likes)==null?void 0:w.length),1)])):(i(),l("button",{key:1,type:"button",class:"article-card-footer-btn",onClick:e[8]||(e[8]=o=>N())},[Zt,t("span",zt,c((M=s.article.likes)==null?void 0:M.length),1)])),t("button",{type:"button",class:"article-card-footer-btn",onClick:e[9]||(e[9]=o=>R(o))},[Gt,t("span",Jt,c((j=s.article.comments)==null?void 0:j.length),1)]),Wt]),t("ul",Kt,[(i(!0),l(L,null,H(s.article.comments,o=>(i(),l("li",{key:o.id},[t("img",{src:o.photo,alt:"comment.name",onClick:m=>x(o.uid)},null,8,te),t("div",ee,[t("div",se,[f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),t("span",null,c(v(I)(o.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)]),t("p",null,c(o.comment),1)]),o.uid===v(u).uid?(i(),l("button",{key:0,type:"button",class:"comment-delete-btn",onClick:m=>Q(s.article,s.index,o.id)},ie,8,oe)):h("",!0)]))),128)),t("li",le,[t("img",{src:v(u).photo,alt:"comment.name"},null,8,ae),et(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>y.value[s.index]=o),onKeyup:e[11]||(e[11]=ot(o=>C(s.article.id,s.index),["enter"]))},null,544),[[st,y.value[s.index]]]),t("button",{type:"button",onClick:e[12]||(e[12]=o=>C(s.article.id,s.index))},re)])])])}}});var ke=lt(de,[["__scopeId","data-v-5fa2aecb"]]);export{ke as default};
