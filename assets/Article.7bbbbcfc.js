import{d as G,x as W,j as X,k as Z,r as K,h as tt,o as n,c as l,e as t,F as I,m as L,t as c,q as m,i as f,l as p,v as k,u as h,E as et,I as st,J as ot,p as it,f as nt}from"./vendor.4dab4da4.js";import{_ as lt,e as at,g as ct,u as rt,v as dt,w as ut,x as mt,y as ht}from"./index.fe1cc65e.js";import{Q as vt}from"./main.6def93c2.js";import{d as H}from"./dayjs.bfbae3ba.js";const r=s=>(it("data-v-8f6e5690"),s=s(),nt(),s),bt={class:"article-card"},kt={class:"article-card-header"},gt={class:"liked-list"},yt={class:"liked-item-modal-container"},_t=r(()=>t("div",{class:"liked-item-triangle-dicoration"},null,-1)),ft={class:"liked-item-modal"},pt=["src","alt"],Ct={class:"liked-item-modal-content"},xt={class:"liked-modal-btns"},At=["onClick"],$t=r(()=>t("button",{type:"button"},"chat",-1)),wt={key:0},Mt={key:1},jt={key:0,class:"like-this-text"},Tt=k(" and"),Ft=r(()=>t("button",{class:"people-like-btn"},"more",-1)),Dt=k("people "),Yt=[Tt,Ft,Dt],It={key:1},Lt=r(()=>t("button",{type:"button",class:"article-card-more-btn"},[t("img",{src:rt,alt:"more button"})],-1)),Ht={key:0},qt={key:1},St={key:2},Ut={class:"article-card-body"},Nt={class:"article-card-user"},Vt=["src","alt"],Bt={key:0,class:"user-link-notice"},Qt={class:"article-time"},Et={class:"article-create-time"},Pt=["innerHTML"],Jt={class:"article-card-footer"},Ot=r(()=>t("img",{src:dt,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),Rt={class:"article-card-likes-qty"},zt=r(()=>t("img",{src:ut,alt:"thumbs-up button",class:"thumbs-up-img"},null,-1)),Gt={class:"article-card-likes-qty"},Wt=r(()=>t("img",{src:mt,alt:"comments",class:"comments-img"},null,-1)),Xt={class:"article-card-comments-qty"},Zt=r(()=>t("button",{type:"button",class:"article-card-footer-btn"},[t("img",{src:ht,alt:"share button",class:"share-img"}),t("span",null,"share")],-1)),Kt={class:"article-messages-list"},te=["src","onClick"],ee={class:"comment-body"},se={class:"comment-header"},oe=["onClick"],ie=r(()=>t("span",{class:"material-icons"},"delete_outline",-1)),ne=[ie],le={class:"comment-input-group"},ae=["src"],ce=r(()=>t("span",{class:"material-icons"},"send",-1)),re=[ce],de=G({props:{article:{type:Object,default:()=>({}),required:!0},index:{type:Number,default:0,required:!0}},emits:["thumbsUp","removeThumbsUp","deleteArticle","addArticleFavorite","removeAriticleFavorite","deleteComment","submitComment"],setup(s,{expose:q,emit:d}){const S=()=>d("thumbsUp"),U=()=>d("removeThumbsUp"),N=()=>d("deleteArticle"),V=()=>d("addArticleFavorite"),B=()=>d("removeAriticleFavorite"),C=(i,e)=>{const a={articleId:i,articleIdx:e,comment:y.value[e]};d("submitComment",a)},Q=(i,e,a)=>{d("deleteComment",{article:i,articleIdx:e,commentId:a})},E=W(),P=X(at),v=Z(()=>P.value.user),J=i=>{var a;return((a=i.likes)==null?void 0:a.length)?i.likes.some(b=>b.uid===v.value.uid):!1},g=i=>{if(!(!i||i&&!i.length))return i.filter((e,a)=>a<5)},x=i=>{const e=i.target;i.type==="mouseenter"?e.classList.add("show"):e.classList.remove("show")},A=i=>E.push(`/@${i}/profile`),O=i=>{i.target.closest(".article-card").classList.toggle("show")},$=i=>{const e=i.target;i.type==="mouseenter"?e.classList.add("show"):i.type==="mouseleave"&&e.classList.remove("show")},R=i=>{if(!!(i==null?void 0:i.length))return i.some(e=>e.uid===v.value.uid)},z=i=>new vt(i.ops).convert(),y=K([]);return q({resetCommentInput:i=>y.value[i]=""}),(i,e)=>{var b,w,M,j;const a=tt("router-link");return n(),l("div",bt,[t("div",kt,[t("ul",gt,[(n(!0),l(I,null,L(g(s.article.likes),(o,u)=>{var T,F,D,Y;return n(),l("li",{key:o.uid,onMouseenter:e[0]||(e[0]=_=>x(_)),onMouseleave:e[1]||(e[1]=_=>x(_)),class:"liked-item"},[t("div",yt,[_t,t("div",ft,[t("img",{src:o.photo,alt:o.name},null,8,pt),t("div",Ct,[t("h3",null,c(o.name),1),t("h4",null,c(o.job),1),t("div",xt,[t("button",{type:"button",onClick:_=>A(o.uid)},"profile",8,At),$t])])])]),u!==0&&((T=g(s.article.likes))==null?void 0:T.length)-1===u&&s.article.likes&&((F=s.article.likes)==null?void 0:F.length)<=5?(n(),l("span",wt,"\xA0and\xA0")):m("",!0),f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),u<4&&s.article.likes&&(((D=g(s.article.likes))==null?void 0:D.length)-2!==u||s.article.likes.length>5)&&((Y=g(s.article.likes))==null?void 0:Y.length)-1!==u?(n(),l("span",Mt,",\xA0")):m("",!0)],32)}),128)),s.article.likes&&s.article.likes.length>5?(n(),l("li",jt,Yt)):m("",!0),((b=s.article.likes)==null?void 0:b.length)?(n(),l("li",It,"\xA0liked this")):m("",!0)]),t("div",{class:"card-btns-group",onMouseleave:e[5]||(e[5]=o=>$(o)),onMouseenter:e[6]||(e[6]=o=>$(o))},[Lt,t("ul",null,[h(v).uid===s.article.uid?(n(),l("li",Ht,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>N())},"delete")])):m("",!0),R(s.article.favorites)?(n(),l("li",St,[t("button",{type:"button",class:"un-favorite-btn",onClick:e[4]||(e[4]=o=>B())},"UnFavorite")])):(n(),l("li",qt,[t("button",{type:"button",onClick:e[3]||(e[3]=o=>V())},"favorite")]))])],32)]),t("div",Ut,[t("div",Nt,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[t("img",{src:s.article.photo||h(ct)("user"),alt:s.article.name},null,8,Vt)]),_:1},8,["to"]),t("div",null,[f(a,{to:`/@${s.article.uid}`,class:"user-link"},{default:p(()=>[k(c(s.article.name),1)]),_:1},8,["to"]),h(v).uid===s.article.uid?(n(),l("span",Bt,"You")):m("",!0),t("h4",null,c(s.article.job),1)]),t("div",Qt,[t("span",Et,c(h(H)(s.article.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)])]),t("div",{innerHTML:z(s.article.content)},null,8,Pt)]),t("div",Jt,[J(s.article)?(n(),l("button",{key:0,type:"button",onClick:e[7]||(e[7]=o=>U()),class:"article-card-footer-btn active"},[Ot,t("span",Rt,c((w=s.article.likes)==null?void 0:w.length),1)])):(n(),l("button",{key:1,type:"button",class:"article-card-footer-btn",onClick:e[8]||(e[8]=o=>S())},[zt,t("span",Gt,c((M=s.article.likes)==null?void 0:M.length),1)])),t("button",{type:"button",class:"article-card-footer-btn",onClick:e[9]||(e[9]=o=>O(o))},[Wt,t("span",Xt,c((j=s.article.comments)==null?void 0:j.length),1)]),Zt]),t("ul",Kt,[(n(!0),l(I,null,L(s.article.comments,o=>(n(),l("li",{key:o.id},[t("img",{src:o.photo,alt:"comment.name",onClick:u=>A(o.uid)},null,8,te),t("div",ee,[t("div",se,[f(a,{to:`/@${o.uid}`},{default:p(()=>[k(c(o.name),1)]),_:2},1032,["to"]),t("span",null,c(h(H)(o.create_time*1e3).format("YYYY/MM/DD HH:mm:ss")),1)]),t("p",null,c(o.comment),1)]),o.uid===h(v).uid?(n(),l("button",{key:0,type:"button",class:"comment-delete-btn",onClick:u=>Q(s.article,s.index,o.id)},ne,8,oe)):m("",!0)]))),128)),t("li",le,[t("img",{src:h(v).photo,alt:"comment.name"},null,8,ae),et(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>y.value[s.index]=o),onKeyup:e[11]||(e[11]=ot(o=>C(s.article.id,s.index),["enter"]))},null,544),[[st,y.value[s.index]]]),t("button",{type:"button",onClick:e[12]||(e[12]=o=>C(s.article.id,s.index))},re)])])])}}});var ke=lt(de,[["__scopeId","data-v-8f6e5690"]]);export{ke as default};
